@model CreateUserViewModel
@section quickButton{
    @{ Html.RenderPartial("_QuickButtonAdmin"); }
}

@using (Html.BeginForm("Create", "Account", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
{
    @Html.AntiForgeryToken()
    <h4>创建新用户</h4>
    <hr />
    
    <div class="form-group">
        @Html.LabelFor(m => m.UserName, new { @class = "col-md-2 control-label" })
        <div class="col-md-10">
            @Html.TextBoxFor(m => m.UserName, new { @class = "form-control" })
            @Html.ValidationMessageFor(m => m.UserName)
        </div>
    </div>


    <div class="form-group">
        @Html.LabelFor(m => m.Password, new { @class = "col-md-2 control-label" })
        <div class="col-md-10">
            @Html.PasswordFor(m => m.Password, new { @class = "form-control" })
            @Html.ValidationMessageFor(m => m.Password)
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.Email, new { @class = "col-md-2 control-label" })
        <div class="col-md-10">
            @Html.TextBoxFor(m => m.Email, new { @class = "form-control" })
            @Html.ValidationMessageFor(m => m.Email)
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.Mobile, new { @class = "col-md-2 control-label" })
        <div class="col-md-10">
            @Html.TextBoxFor(m => m.Mobile, new { @class = "form-control" })
            @Html.ValidationMessageFor(m => m.Mobile)
        </div>
    </div>
    
    <div class="form-group">
        <label class="col-md-2 control-label">入职时间</label>

        <div class="col-md-10">
            <input id="CreateOn" name="CreateOn" type="text" value="@(Model.CreateOn == DateTime.MinValue ? DateTime.Now.ToString("yyyy-MM-dd") : Model.CreateOn.ToString("yyyy-MM-dd"))" class="form-control" data-date-format="yyyy-mm-dd" />
        </div>
    </div>

    <div class="form-group">
        <label class="col-md-2 control-label" for="RoleId">角色</label>
        <div class="col-md-10">
            <select class="form-control" name="RoleId" id="RoleId">
                @foreach (var role in CacheHelper<Role>.GetAll())
                {
                    if (role.Id == 3) { continue; } // 超管不能够分配
                    <option value="@role.Id">@role.Title</option>
                }
            </select>
        </div>
    </div>

    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" class="btn btn-primary" value="保存" />
        </div>
    </div>
}
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script src="/assets/js/bootstrap-datepicker.js"></script>
    <script type="text/javascript">
        $(function () {
            $.fn.datepicker.dates['zh-CN'] = {
                days: ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六", "星期日"],
                daysShort: ["周日", "周一", "周二", "周三", "周四", "周五", "周六", "周日"],
                daysMin: ["日", "一", "二", "三", "四", "五", "六", "日"],
                months: ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"],
                monthsShort: ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一", "十二"],
                today: "今天"
            };
            $("#CreateOn").datepicker({ autoclose: true, clearBtn: true, language: 'zh-CN' });
        });
    </script>
}